[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v42.0/sobjects/skuid__Page__c/a6O760000008Zn3EAE"},"Id":"a6O760000008Zn3EAE","Name":"RequestModification","skuid__API_Version__c":"v1","skuid__Type__c":"Desktop","skuid__UniqueId__c":"_RequestModification","skuid__Module__c":null,"skuid__Composer_Settings__c":null,"skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage unsavedchangeswarning=\"yes\" personalizationmode=\"server\" showsidebar=\"true\" showheader=\"true\" globalfeedbackenabled=\"false\">\n\t<models><model id=\"RequestModificationCatagory\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" sobject=\"genesis__Application_Note__c\"><fields><field id=\"genesis__Application__r.genesis__Loan_Number__c\"/><field id=\"Current_Loan_Amount__c\"/><field id=\"Current_Maturity_Date__c\"/><field id=\"Modified_Maturity_Date__c\"/><field id=\"genesis__Application__c\"/><field id=\"genesis__Application__r.Name\"/><field id=\"Status__c\"/><field id=\"Updated_Loan_Amount__c\"/><field id=\"CreatedDate\"/></fields><conditions><condition type=\"param\" value=\"id\" field=\"genesis__Application__c\" operator=\"=\" mergefield=\"Id\" enclosevalueinquotes=\"true\" fieldtargetobjects=\"genesis__Applications__c\" inactive=\"false\"/></conditions><actions/></model><model id=\"UpdateModificationRequest\" limit=\"1\" query=\"false\" createrowifnonefound=\"false\" datasource=\"salesforce\" sobject=\"genesis__Application_Note__c\"><fields><field id=\"genesis__Application__r.genesis__Loan_Number__c\"/><field id=\"Current_Maturity_Date__c\"/><field id=\"Modified_Maturity_Date__c\"/><field id=\"Current_Loan_Amount__c\"/><field id=\"Updated_Loan_Amount__c\"/><field id=\"Status__c\"/></fields><conditions><condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"Id\" state=\"filterableon\" inactive=\"false\" name=\"Id\" operator=\"=\"/></conditions><actions/></model></models>\n\t<components><panelset type=\"standard\" uniqueid=\"sk-zv-302\"><panels><panel><components><skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"false\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" hideheader=\"false\" hidefooter=\"false\" pagesize=\"10\" alwaysresetpagination=\"false\" createrecords=\"false\" mode=\"edit\" allowcolumnreordering=\"false\" responsive=\"true\" uniqueid=\"sk-14c-363\" model=\"RequestModificationCatagory\" instantfilters=\"false\" emptysearchbehavior=\"query\" hideconfigbutton=\"true\"><fields><field id=\"genesis__Application__r.genesis__Loan_Number__c\" hideable=\"true\" uniqueid=\"fi-170-1159\" readonly=\"true\"/><field id=\"Current_Maturity_Date__c\" hideable=\"true\" uniqueid=\"fi-1Ie-1250\" readonly=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field id=\"Modified_Maturity_Date__c\" hideable=\"true\" uniqueid=\"fi-1Ie-1251\" readonly=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field id=\"Current_Loan_Amount__c\" hideable=\"true\" uniqueid=\"fi-170-1157\" readonly=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field id=\"Updated_Loan_Amount__c\" hideable=\"true\" uniqueid=\"fi-14by-681\" readonly=\"true\"><label>Modified Loan Amount</label><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field id=\"Status__c\" hideable=\"true\" uniqueid=\"fi-lFh-372\" readonly=\"true\"/><field id=\"CreatedDate\" hideable=\"true\" uniqueid=\"fi-25Vu-615\"/><field type=\"BUTTON\" hideable=\"false\" uniqueid=\"fi-20Og-1770\" showbydefault=\"true\"><text>Approve</text><actions><action type=\"custom\" snippet=\"ApproveRequest\"/></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field type=\"BUTTON\" hideable=\"false\" uniqueid=\"fi-20P1-1846\" showbydefault=\"true\"><text>Decline</text><actions><action type=\"custom\" snippet=\"RejectRequest\"/></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-20RL-1921\"><text>Edit</text><actions><action type=\"custom\" model=\"UpdateModificationRequest\" condition=\"Id\" value=\"{{$.params.item.row.Id}}\" snippet=\"EditApplicationNote\"/><action type=\"showPopup\"><popup title=\"New Popup\" width=\"90%\"><components><skootable showconditions=\"true\" showsavecancel=\"true\" showerrorsinline=\"false\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" hideheader=\"false\" hidefooter=\"false\" pagesize=\"10\" alwaysresetpagination=\"false\" createrecords=\"false\" model=\"UpdateModificationRequest\" mode=\"edit\" allowcolumnreordering=\"false\" responsive=\"true\" uniqueid=\"sk-20Sv-2000\" instantfilters=\"false\" emptysearchbehavior=\"query\" hideconfigbutton=\"true\"><fields><field id=\"genesis__Application__r.genesis__Loan_Number__c\" hideable=\"true\" uniqueid=\"fi-20T3-2018\" readonly=\"true\"/><field id=\"Current_Maturity_Date__c\" hideable=\"true\" uniqueid=\"fi-20T3-2021\" readonly=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition type=\"blank\" operator=\"!=\" fieldmodel=\"UpdateModificationRequest\" sourcetype=\"fieldvalue\" field=\"Modified_Maturity_Date__c\" fieldtargetobjects=\"genesis__Application_Note__c\" value=\"null\" enclosevalueinquotes=\"false\"/><rendercondition type=\"fieldvalue\" operator=\"!=\" enclosevalueinquotes=\"true\" fieldmodel=\"UpdateModificationRequest\" sourcetype=\"fieldvalue\" field=\"Status__c\" fieldtargetobjects=\"genesis__Application_Note__c\" value=\"Approved\"/></renderconditions><enableconditions/></field><field id=\"Modified_Maturity_Date__c\" hideable=\"false\" uniqueid=\"fi-20T3-2019\" showbydefault=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition type=\"blank\" operator=\"!=\" fieldmodel=\"UpdateModificationRequest\" sourcetype=\"fieldvalue\" field=\"Modified_Maturity_Date__c\" fieldtargetobjects=\"genesis__Application_Note__c\" value=\"null\" enclosevalueinquotes=\"false\"/><rendercondition type=\"fieldvalue\" operator=\"!=\" enclosevalueinquotes=\"true\" fieldmodel=\"UpdateModificationRequest\" sourcetype=\"fieldvalue\" field=\"Status__c\" fieldtargetobjects=\"genesis__Application_Note__c\" value=\"Approved\"/></renderconditions><enableconditions/></field><field id=\"Current_Loan_Amount__c\" hideable=\"false\" uniqueid=\"fi-20T3-2022\" readonly=\"true\" showbydefault=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition type=\"blank\" operator=\"!=\" fieldmodel=\"UpdateModificationRequest\" sourcetype=\"fieldvalue\" field=\"Updated_Loan_Amount__c\" fieldtargetobjects=\"genesis__Application_Note__c\" value=\"null\" enclosevalueinquotes=\"false\"/><rendercondition type=\"fieldvalue\" operator=\"!=\" enclosevalueinquotes=\"true\" fieldmodel=\"UpdateModificationRequest\" sourcetype=\"fieldvalue\" field=\"Status__c\" fieldtargetobjects=\"genesis__Application_Note__c\" value=\"Approved\"/></renderconditions><enableconditions/></field><field id=\"Updated_Loan_Amount__c\" hideable=\"false\" uniqueid=\"fi-20T3-2020\" showbydefault=\"true\"><label>Modified Loan Amount</label><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition type=\"blank\" operator=\"!=\" fieldmodel=\"UpdateModificationRequest\" sourcetype=\"fieldvalue\" field=\"Updated_Loan_Amount__c\" fieldtargetobjects=\"genesis__Application_Note__c\" value=\"null\" enclosevalueinquotes=\"false\"/><rendercondition type=\"fieldvalue\" operator=\"!=\" enclosevalueinquotes=\"true\" fieldmodel=\"UpdateModificationRequest\" sourcetype=\"fieldvalue\" field=\"Status__c\" fieldtargetobjects=\"genesis__Application_Note__c\" value=\"Approved\"/></renderconditions><enableconditions/></field></fields><rowactions/><massactions usefirstitemasdefault=\"true\"/><views/><searchfields/><renderconditions logictype=\"and\"/></skootable></components><afterclose><action type=\"custom\" snippet=\"reloadScreen\"/></afterclose></popup></action></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field></fields><rowactions/><massactions usefirstitemasdefault=\"true\"/><views/><actions defaultlabel=\"Global Actions\" defaulticon=\"sk-icon-magic\" usefirstitemasdefault=\"true\"/><searchfields/><renderconditions logictype=\"and\"/></skootable></components></panel></panels></panelset></components>\n\t<resources>\n\t\t<labels/>\n\t\t<javascript><jsitem location=\"inlinesnippet\" cachelocation=\"false\" name=\"ApproveRequest\">var params = arguments[0],   \ncontextRow = params.item ? params.item.row : params.row;\n$ = skuid.$;\nvar appApplicationModel = skuid.model.getModel('RequestModificationCatagory');\nconsole.log(contextRow.Id);\nvar appApplicationRow = appApplicationModel.data[0];\nvar appNoteRow = contextRow.Id;\nconsole.log(appApplicationRow);\n//\nvar appNoteStatus=contextRow.Status__c;\nif(appNoteStatus=='Approved'||appNoteStatus=='Declined'){\n    alert('This modification request has been already ' +appNoteStatus);\n}\nelse{\n//\n var callback = {\n    onSuccess:function(result)\n    {   console.log(result);\n        if(result[0] == \"Modification request has been updated successfully and email to Certified Lender has been sent.\")\n        {\n            alert(result);\n            //$.unblockUI();\n            skuid.model.updateData([appApplicationModel],function(){\n        $.unblockUI();\n    });\n        } else if(result[0] == \"Failed to Update the modification request.Please try after sometime.\")\n        {\n            alert(result);\n           // $.unblockUI();\n           skuid.model.updateData([appApplicationModel],function(){\n        $.unblockUI();\n    });\n        }\n        else{\n            console.log(result[0]);\n            return displayMessage(result[0], 'ERROR');\n        }\n        //window.location.reload(true);\n        skuid.model.updateData([appApplicationModel],function(){\n        $.unblockUI();\n    });\n    },\n    onFailure:function(error)\n    {\n        $.unblockUI();\n        alert(error);\n        console.log(error);\n    }\n};\n\nvar displayMessage = function (message, severity) {\n    if(severity === 'ERROR') {\n        console.log('error');\n        $.unblockUI();\n        return false;\n    }\n};\n$.blockUI({\n    message: 'Please Wait while we are processing the modification request...',\n    onBlock:function(){\n        console.log('appId'+contextRow.Id);\n        console.log('appId'+appApplicationRow.genesis__Application__c);\n        var result = sforce.apex.execute('ApplicationModificationRequestAPI','modificationRequestWS',\n        {\n            appId : appApplicationRow.genesis__Application__c,\n            applicationNoteId : contextRow.Id,\n            modificationStatus : 'Approved'\n        },callback);\n    }\n});\n}</jsitem><jsitem location=\"inlinesnippet\" name=\"RejectRequest\" cachelocation=\"false\">var params = arguments[0],   \ncontextRow = params.item ? params.item.row : params.row;\n$ = skuid.$;\nvar appApplicationModel = skuid.model.getModel('RequestModificationCatagory');\nconsole.log(contextRow.Id);\nvar appApplicationRow = appApplicationModel.data[0];\nvar appNoteRow = contextRow.Id;\nconsole.log(appApplicationRow);\n//\nvar appNoteStatus=contextRow.Status__c;\nif(appNoteStatus=='Approved'||appNoteStatus=='Declined'){\n    alert('This modification request has been already ' +appNoteStatus);\n}\nelse{\n var callback = {\n    onSuccess:function(result)\n    {   console.log(result);\n        if(result[0] == \"Loan Amount Modification request has been successfully declined and email to Certified Lender has been sent.\")\n        {\n            alert(result);\n            //$.unblockUI();\n            skuid.model.updateData([appApplicationModel],function(){\n        $.unblockUI();\n    });\n        } else if(result[0] == \"Maturity Date Modification request has been successfully declined and email to Certified Lender has been sent.\")\n        {\n            alert(result);\n            //$.unblockUI();\n            skuid.model.updateData([appApplicationModel],function(){\n        $.unblockUI();\n    });\n        }\n        else{\n            console.log(result[0]);\n            return displayMessage(result[0], 'ERROR');\n        }\n        //window.location.reload(true);\n        skuid.model.updateData([appApplicationModel],function(){\n        $.unblockUI();\n    });\n    },\n    onFailure:function(error)\n    {\n        $.unblockUI();\n        alert(error);\n        console.log(error);\n    }\n};\n\nvar displayMessage = function (message, severity) {\n    if(severity === 'ERROR') {\n        console.log('error');\n        $.unblockUI();\n        return false;\n    }\n};\n$.blockUI({\n    message: 'Please Wait while we are processing the modification request...',\n    onBlock:function(){\n        console.log('appId'+contextRow.Id);\n        console.log('appId'+appApplicationRow.genesis__Application__c);\n        var result = sforce.apex.execute('ApplicationModificationRequestAPI','modificationRequestWS',\n        {\n            appId : appApplicationRow.genesis__Application__c,\n            applicationNoteId : contextRow.Id,\n            modificationStatus : 'Declined'\n        },callback);\n    }\n});\n}</jsitem><jsitem location=\"inlinesnippet\" name=\"reloadScreen\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\nvar appApplicationModel = skuid.model.getModel('RequestModificationCatagory');\nskuid.model.updateData([appApplicationModel]);</jsitem><jsitem location=\"inlinesnippet\" name=\"EditApplicationNote\" cachelocation=\"false\">var params = arguments[0],   \ncontextRow = params.item ? params.item.row : params.row;\n\nvar appNoteId = contextRow.Id;\nvar appNoteStatus = contextRow.Status__c;\nif(appNoteStatus=='Approved'||appNoteStatus=='Declined'){\n    alert('This modification request has been already ' +appNoteStatus);\n        return false;\n    }\nfunction callbackFunc(){\n        console.log('here');\n    }\nvar updateappNoteModel = skuid.model.getModel('UpdateModificationRequest');\nvar conditionName = updateappNoteModel.getConditionByName('Id');\nvar setCondition = updateappNoteModel.setCondition(conditionName,appNoteId,false);\nupdateappNoteModel.updateData(callbackFunc);\n\n</jsitem></javascript>\n\t\t<css/>\n\t\t<actionsequences uniqueid=\"sk-16R-1078\"/>\n\t</resources>\n\t<styles>\n\t\t<styleitem type=\"background\" bgtype=\"none\"/>\n\t</styles>\n<interactions/></skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]