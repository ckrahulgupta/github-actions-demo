[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v42.0/sobjects/skuid__Page__c/a6O5f000000yUO8EAM"},"Id":"a6O5f000000yUO8EAM","Name":"ManagingHouseholdsAndAffiliations","skuid__API_Version__c":"v1","skuid__Type__c":"Desktop","skuid__UniqueId__c":"ngUi_ManagingHouseholdsAndAffiliations","skuid__Module__c":"ngUi","skuid__Composer_Settings__c":null,"skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage unsavedchangeswarning=\"\" personalizationmode=\"server\" showsidebar=\"false\" useviewportmeta=\"true\" showheader=\"false\">\n  <models>\n    <model id=\"MHA_SelectedAccount\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"Account\">\n      <fields>\n        <field id=\"Id\"/>\n      </fields>\n      <conditions>\n        <condition type=\"param\" value=\"id\" field=\"Id\" operator=\"=\" enclosevalueinquotes=\"true\" novaluebehavior=\"noquery\"/>\n      </conditions>\n      <actions/>\n    </model>\n    <model id=\"MHA_RelationshipsAsEntity\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"clcommon__Relationship__c\">\n      <fields>\n        <field id=\"Id\"/>\n        <field id=\"clcommon__Related_Entity__c\"/>\n        <field id=\"clcommon__Related_Entity__r.Name\"/>\n        <field id=\"clcommon__Related_Entity_Role__c\"/>\n      </fields>\n      <conditions logic=\"\">\n        <condition type=\"modelmerge\" value=\"\" field=\"clcommon__Entity__c\" operator=\"=\" novaluebehavior=\"deactivate\" model=\"MHA_SelectedAccount\" enclosevalueinquotes=\"true\" mergefield=\"Id\"/>\n      </conditions>\n      <actions/>\n    </model>\n    <model id=\"MHA_RelationshipsAsRelatedEntity\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"clcommon__Relationship__c\">\n      <fields>\n        <field id=\"clcommon__Entity__c\"/>\n        <field id=\"clcommon__Entity__r.Name\"/>\n        <field id=\"clcommon__Entity_Role__c\"/>\n        <field id=\"Id\"/>\n      </fields>\n      <conditions logic=\"\">\n        <condition type=\"modelmerge\" value=\"\" field=\"clcommon__Related_Entity__c\" operator=\"=\" state=\"\" novaluebehavior=\"deactivate\" model=\"MHA_SelectedAccount\" enclosevalueinquotes=\"true\" mergefield=\"Id\"/>\n      </conditions>\n      <actions/>\n    </model>\n    <model id=\"MHA_RelationshipView\" query=\"true\" createrowifnonefound=\"false\" datasource=\"Ui-Only\" processonclient=\"true\">\n      <fields>\n        <field id=\"AccountName\" displaytype=\"TEXT\" label=\"Account Name\"/>\n        <field id=\"RelationName\" displaytype=\"TEXT\" label=\"Relation Name\"/>\n        <field id=\"AccountId\" displaytype=\"TEXT\" label=\"Account Id\"/>\n      </fields>\n      <conditions/>\n      <actions>\n        <action>\n          <actions>\n            <action type=\"save\" rollbackonanyerror=\"true\">\n              <models>\n                <model>MHA_RelationshipView</model>\n              </models>\n            </action>\n          </actions>\n          <events>\n            <event>row.updated</event>\n          </events>\n        </action>\n      </actions>\n    </model>\n    <model id=\"MHA_SelectedRelationshipAccount\" limit=\"1\" query=\"false\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"Account\">\n      <fields>\n        <field id=\"clcommon__Legal_Entity_Type__c\"/>\n        <field id=\"clcommon__Legal_Entity_Type__r.Name\"/>\n        <field id=\"Name\"/>\n        <field id=\"Id\"/>\n        <field id=\"clcommon__Direct_Exposure__c\"/>\n        <field id=\"clcommon__Indirect_Exposure__c\"/>\n        <field id=\"Phone\"/>\n      </fields>\n      <conditions>\n        <condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"Id\" operator=\"=\" state=\"filterableoff\" inactive=\"true\" name=\"AccountId\"/>\n      </conditions>\n      <actions/>\n    </model>\n  </models>\n  <components>\n    <grid uniqueid=\"sk-1VT-fx-818\">\n      <divisions>\n        <division behavior=\"specified\" verticalalign=\"top\" width=\"33%\" cssclass=\"\" uniqueid=\"related-accounts-left-panel\">\n          <components>\n            <wrapper uniqueid=\"sk-1GCWRo-150\" cssclass=\"account-relationship-list-wrapper\">\n              <components>\n                <skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"false\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" pagesize=\"all\" createrecords=\"false\" model=\"MHA_RelationshipView\" buttonposition=\"\" mode=\"readonly\" allowcolumnreordering=\"false\" uniqueid=\"sk-1VPNPR-136\" instantfilters=\"false\" emptysearchbehavior=\"query\" cssclass=\"account-relationships\">\n                  <fields>\n                    <field type=\"COMBO\" hideable=\"false\" uniqueid=\"fi-1VPcj1-211\" valuehalign=\"\" allowhtml=\"true\" showbydefault=\"false\">\n                      <template>&lt;div id=\"{{{AccountId}}}\" style=\"cursor: pointer;\" onclick=\"querySelectedAccount(this.id)\"&gt;\n    &lt;div&gt; {{AccountName}} &lt;/div&gt;\n    &lt;div&gt; {{RelationName}} &lt;/div&gt;\n&lt;/div&gt;</template>\n                      <label/>\n                    </field>\n                  </fields>\n                  <rowactions/>\n                  <massactions usefirstitemasdefault=\"true\"/>\n                  <views>\n                    <view type=\"standard\"/>\n                  </views>\n                  <renderconditions logictype=\"and\"/>\n                </skootable>\n              </components>\n              <styles>\n                <styleitem type=\"background\"/>\n                <styleitem type=\"border\"/>\n                <styleitem type=\"size\"/>\n              </styles>\n            </wrapper>\n            <pagetitle uniqueid=\"sk-2JaTAp-157\" model=\"MHA_RelationshipsAsEntity\" cssclass=\"add-relation-button-container\">\n              <actions>\n                <action type=\"multi\" label=\"Add New Relation\" cssclass=\"\" icon=\"fa-plus\">\n                  <actions>\n                    <action type=\"custom\" snippet=\"OpenAddNewRelationshipDialog\"/>\n                  </actions>\n                </action>\n              </actions>\n            </pagetitle>\n          </components>\n        </division>\n        <division behavior=\"specified\" verticalalign=\"top\" width=\"65%\" uniqueid=\"related-accounts-right-panel\">\n          <components>\n            <wrapper uniqueid=\"sk-1D7a5j-190\">\n              <components>\n                <wrapper uniqueid=\"selected-account-title-wrapper\">\n                  <components>\n                    <pagetitle uniqueid=\"sk-1un-Sn-134\" model=\"MHA_SelectedRelationshipAccount\" cssclass=\"\">\n                      <actions/>\n                      <maintitle>{{Name}}</maintitle>\n                      <renderconditions logictype=\"and\"/>\n                    </pagetitle>\n                  </components>\n                  <styles>\n                    <styleitem type=\"background\" bgtype=\"color\">\n                      <styles>\n                        <styleitem property=\"background-color\" value=\"#37444e\"/>\n                      </styles>\n                    </styleitem>\n                    <styleitem type=\"border\" padding=\"all\">\n                      <styles>\n                        <styleitem property=\"padding\" value=\"4px\"/>\n                        <styleitem property=\"box-sizing\" value=\"border-box\"/>\n                      </styles>\n                    </styleitem>\n                    <styleitem type=\"size\" height=\"custom\">\n                      <styles>\n                        <styleitem property=\"min-height\" value=\"49px\"/>\n                        <styleitem property=\"max-height\" value=\"49px\"/>\n                        <styleitem property=\"overflow-y\" value=\"auto\"/>\n                      </styles>\n                    </styleitem>\n                  </styles>\n                </wrapper>\n                <basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"false\" model=\"MHA_SelectedRelationshipAccount\" buttonposition=\"\" uniqueid=\"sk-1VS3-o-623\" mode=\"readonly\" layout=\"\" cssclass=\"selected-account-details-editor\">\n                  <columns layoutmode=\"fixed\">\n                    <column width=\"100%\">\n                      <sections>\n                        <section title=\"{{Name}}\" collapsible=\"no\" showheader=\"false\">\n                          <fields>\n                            <field id=\"clcommon__Legal_Entity_Type__r.Name\" valuehalign=\"\" type=\"\">\n                              <label>Legal Entity Type</label>\n                            </field>\n                            <field id=\"clcommon__Direct_Exposure__c\" showhelp=\"false\" decimalplaces=\"\" valuehalign=\"\" type=\"\"/>\n                            <field id=\"clcommon__Indirect_Exposure__c\" showhelp=\"false\" decimalplaces=\"\" valuehalign=\"\" type=\"\"/>\n                            <field type=\"COMBO\" valuehalign=\"\" editmodebehavior=\"autopopup\" allowhtml=\"true\">\n                              <template>&lt;a href=\"/{{{Id}}}\" target=\"_blank\" style=\"color:white;\"&gt;\n    &lt;div id=\"detail-button-panel\" align=\"right\" style=\"padding-right: 2%;\"&gt;\n        &lt;div class=\"nx-pagetitle-action ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only view-btn\" \n            id=\"view-detail-button\" data-rendered=\"true\" role=\"button\" tabindex=\"0\" style=\"display: inline-block;\"&gt;\n            &lt;span class=\"ui-button-text\"&gt; View Details &lt;/span&gt;\n        &lt;/div&gt;\n    &lt;div&gt;\n&lt;/a&gt;</template>\n                            </field>\n                          </fields>\n                        </section>\n                      </sections>\n                    </column>\n                  </columns>\n                  <renderconditions logictype=\"and\"/>\n                </basicfieldeditor>\n              </components>\n              <styles>\n                <styleitem type=\"background\"/>\n                <styleitem type=\"border\"/>\n                <styleitem type=\"size\"/>\n              </styles>\n              <renderconditions logictype=\"and\">\n                <rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"true\" fieldmodel=\"MHA_SelectedRelationshipAccount\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"hasRows\"/>\n              </renderconditions>\n            </wrapper>\n          </components>\n        </division>\n      </divisions>\n      <styles>\n        <styleitem type=\"background\" bgtype=\"color\">\n          <styles>\n            <styleitem property=\"background-color\" value=\"white\"/>\n          </styles>\n        </styleitem>\n      </styles>\n    </grid>\n  </components>\n  <resources>\n    <labels/>\n    <javascript>\n      <jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"commonUtils.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem>\n      <jsitem location=\"inline\" name=\"MHA_GenerateViewData\" cachelocation=\"false\" url=\"\">(function(skuid){\n\tvar $ = skuid.$;\n\t\n\t$(document.body).one('pageload',function(){\n\t    // create relationship view table\n\t    var relationView = skuid.model.getModel('MHA_RelationshipView');\n\t\trelationView.data = [];\n\t\t\n\t\tvar relations = skuid.model.getModel('MHA_RelationshipsAsEntity').data;\n\t\tfor (i = 0; i &lt; relations.length; i++) { \n            relationView.createRow({\n                additionalConditions: [\n                    { field: 'AccountName', value:relations[i].clcommon__Related_Entity__r.Name },\n                    { field: 'RelationName', value:relations[i].clcommon__Related_Entity_Role__c },\n                    { field: 'AccountId', value:relations[i].clcommon__Related_Entity__c}\n                ]\n            });   \n        }\n        \n        var relatedRelations = skuid.model.getModel('MHA_RelationshipsAsRelatedEntity').data;\n        for (i = 0; i &lt; relatedRelations.length; i++) { \n            relationView.createRow({\n                additionalConditions: [\n                    { field: 'AccountName', value:relatedRelations[i].clcommon__Entity__r.Name },\n                    { field: 'RelationName', value:relatedRelations[i].clcommon__Entity_Role__c },\n                    { field: 'AccountId', value:relatedRelations[i].clcommon__Entity__c}\n                ]\n            });   \n        }\n        \n        if(relationView.data.length &gt; 0){\n            // sort the records\n            relationView.data.sort(function(a, b){return a.AccountName - b.AccountName});\n            \n            // need to save else skuid shows unsaved changes css\n            skuid.model.save([relationView], {callback: function(result){\n                // get first relationship details\n                querySelectedAccount(relationView.data[0].AccountId);\n            }});\n        }\n        \n        // show button label as tooltip\n        showIconicBtnLabelAsTooltip();\n\t});\n\t// click the first div\n})(skuid)\n\nfunction querySelectedAccount(selectedAccountId){\n    if(selectedAccountId){\n        var selectedAccModel = skuid.model.getModel('MHA_SelectedRelationshipAccount');\n        var accountIdCondition = selectedAccModel.getConditionByName('AccountId');\n        selectedAccModel.setCondition(accountIdCondition, selectedAccountId);\n        skuid.model.updateData([selectedAccModel],function(){\n            // success\n            highlightSelectedRow(selectedAccountId);\n        });\n    }\n}\n\nfunction highlightSelectedRow(rowId){\n    // remove highlighted row css\n    $('.account-relationships').find('table tbody tr').each(\n        function(index, element) {\n            $(element).removeClass(\"highlighted-row\");  \n        }                \n    )\n    $('.account-relationships table tr').each(\n        function(index, element) {\n            $(element).find('div #' + rowId).each(\n                function(i, e) {\n                    $(element).addClass('highlighted-row');      \n                }   \n            )\n        } \n    )\n}</jsitem>\n      <jsitem location=\"inlinesnippet\" name=\"OpenAddNewRelationshipDialog\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\nvar title = 'Add Member';\nvar skuidPage = 'AddNewRelationship';\nvar iframeUrl = '/apex/skuid__ui?page=' + skuidPage + '&amp;id=' + skuid.model.getModel('MHA_SelectedAccount').getFirstRow().Id;\nopenTopLevelDialog({\n    title: title,\n    iframeUrl: iframeUrl\n});</jsitem>\n    </javascript>\n    <css>\n      <cssitem cachelocation=\"false\" filepath=\"customcss.css\" location=\"staticresource\" name=\"CLSStyleSheetPack\" namespace=\"genesisExtn\" url=\"\"/>\n      <cssitem location=\"inline\" name=\"MHA_CustomCss\" cachelocation=\"false\">div[pagename = \"ManagingHouseholdsAndAffiliations\"]{\n   background: #ffffff;\n   height: 100%;\n   position: absolute;\n   top: 0;\n   bottom: 0;\n   left: 0;\n   right: 0;\n}\n\ndiv[pagename = \"ManagingHouseholdsAndAffiliations\"] &gt; .nx-page-content &gt; .sk-grid{\n    height: 100%;\n}\n\n.account-relationships.nx-skootable.nx-editor{\n    margin-bottom: 0px!important;\n    margin-left: 5px;\n}\n\n.account-relationships .nx-editor-contents .nx-list-footer{\n    display: none;\n}\n\n.account-relationships table.nx-skootable-data thead tr th {    \n   display: none!important;\n}\n\n.account-relationships table.nx-skootable-data tbody tr &gt; td {  \n    border-style: solid;\n    border-width: 1px 1px 5px 1px;\n    border-color: #ebeef0 !important;\n}\n\n.account-relationships table.nx-skootable-data tbody tr.highlighted-row td {    \n   border-bottom-color: #1cbdd4!important;\n}\n\n.account-relationships table.nx-skootable-data tbody tr td {    \n   border-bottom-color: #f5f5f5!important;\n}\n\n.account-relationships .nx-editor-header{\n   display:none; \n}\n\n.account-relationships .nx-editor-contents{\n    margin-top:0px;\n}\n\n#related-accounts-right-panel{\n    margin-right: 5px;\n    margin-left: 5px;\n    margin-bottom: 5px;\n    margin-top: 0px;\n    background: #ffffff;\n}\n\n#related-accounts-right-panel div.nx-basicfieldeditor{\n    overflow-y: auto;\n}\n\n#related-accounts-right-panel div.nx-basicfieldeditor-item{\n    border-bottom-color: #fff;\n}\n\n.selected-account-details-editor{\n    border-style: solid;\n    border-width: 0px 1px 4px 1px;\n    border-color: #ebeef0 !important;\n}\n\n#detail-button-panel .view-btn{\n    background: #1cbdd4;\n}\n#selected-account-title-wrapper .sk-wrapper .nx-editor-header .nx-editor .nx-fieldtext a{\n    color: #ffffff;\n    text-decoration:none!important;\n    cursor: default!important;\n}\n#related-accounts-left-panel{\n    padding-right: 4px;\n}\n.account-relationship-list-wrapper{\n    overflow-y: auto;\n}\n.add-relation-button-container .nx-header-right {\n    float: none;\n    text-align: center;\n    margin-top: 10px;\n}\n</cssitem>\n    </css>\n  </resources>\n  <styles>\n    <styleitem type=\"background\" bgtype=\"color\">\n      <styles>\n        <styleitem property=\"background-color\" value=\"white\"/>\n      </styles>\n    </styleitem>\n    <styleitem property=\"position\" value=\"absolute\"/>\n    <styleitem property=\"top\" value=\"0\"/>\n    <styleitem property=\"bottom\" value=\"0\"/>\n    <styleitem property=\"left\" value=\"0\"/>\n    <styleitem property=\"right\" value=\"0\"/>\n    <styleitem property=\"height\" value=\"100%\"/>\n  </styles>\n  <interactions/>\n</skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]